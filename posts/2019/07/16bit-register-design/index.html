<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><title>16-bit Register Design | Relay Computer</title><meta name=description content="In my last couple of posts I&rsquo;ve been building up to a change of approach in how I&rsquo;m making the cards in my computer. This is mainly because I can&rsquo;t face the monotony of hand building the upcoming register cards (which I&rsquo;ll need three of so it&rsquo;s triple the procrastination holding me back). The obvious solution to all of this is to create a Printed Circuit Board (PCB) which will cut out most of the trickier soldering and pretty much all the repetitive wirewrap &mldr; and that looked like the way to go until I had a go at hand crafting a simplified PCB for the Y backplane and I realised it&rsquo;s not as easy as it might otherwise appear."><meta name=robots content="index, follow"><link href=https://use.fontawesome.com/releases/v5.0.8/css/all.css rel=stylesheet><link rel=stylesheet href=/css/main.css><link rel=apple-touch-icon sizes=57x57 href=/img/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/img/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/img/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/img/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/img/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/img/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/img/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/img/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/img/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/img/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/img/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon/favicon-16x16.png><link rel=manifest href=/img/favicon/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/img/favicon/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta property="og:title" content="16-bit Register Design"><meta property="og:description" content="In my last couple of posts I&rsquo;ve been building up to a change of approach in how I&rsquo;m making the cards in my computer. This is mainly because I can&rsquo;t face the monotony of hand building the upcoming register cards (which I&rsquo;ll need three of so it&rsquo;s triple the procrastination holding me back). The obvious solution to all of this is to create a Printed Circuit Board (PCB) which will cut out most of the trickier soldering and pretty much all the repetitive wirewrap &mldr; and that looked like the way to go until I had a go at hand crafting a simplified PCB for the Y backplane and I realised it&rsquo;s not as easy as it might otherwise appear."><meta property="og:type" content="article"><meta property="og:url" content="https://relaycomputer.co.uk/posts/2019/07/16bit-register-design/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-07-15T11:00:00+00:00"><meta property="article:modified_time" content="2019-07-15T11:00:00+00:00"><meta itemprop=name content="16-bit Register Design"><meta itemprop=description content="In my last couple of posts I&rsquo;ve been building up to a change of approach in how I&rsquo;m making the cards in my computer. This is mainly because I can&rsquo;t face the monotony of hand building the upcoming register cards (which I&rsquo;ll need three of so it&rsquo;s triple the procrastination holding me back). The obvious solution to all of this is to create a Printed Circuit Board (PCB) which will cut out most of the trickier soldering and pretty much all the repetitive wirewrap &mldr; and that looked like the way to go until I had a go at hand crafting a simplified PCB for the Y backplane and I realised it&rsquo;s not as easy as it might otherwise appear."><meta itemprop=datePublished content="2019-07-15T11:00:00+00:00"><meta itemprop=dateModified content="2019-07-15T11:00:00+00:00"><meta itemprop=wordCount content="1561"><meta itemprop=keywords content="design,registers,"><meta name=twitter:card content="summary"><meta name=twitter:title content="16-bit Register Design"><meta name=twitter:description content="In my last couple of posts I&rsquo;ve been building up to a change of approach in how I&rsquo;m making the cards in my computer. This is mainly because I can&rsquo;t face the monotony of hand building the upcoming register cards (which I&rsquo;ll need three of so it&rsquo;s triple the procrastination holding me back). The obvious solution to all of this is to create a Printed Circuit Board (PCB) which will cut out most of the trickier soldering and pretty much all the repetitive wirewrap &mldr; and that looked like the way to go until I had a go at hand crafting a simplified PCB for the Y backplane and I realised it&rsquo;s not as easy as it might otherwise appear."><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-47484999-2","auto"),ga("send","pageview"))</script><script defer language=javascript type=text/javascript src=/js/main.js></script>
<link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css></head><body><script src=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js data-cfasync=false></script>
<script>window.cookieconsent.initialise({palette:{popup:{background:"#000"},button:{background:"#f1d600"}},theme:"edgeless"})</script><nav class="navbar is-primary" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a href=/ class="navbar-item has-text-weight-semibold"><img class=mr-2 src=/img/favicon/favicon-96x96.png width=32>
Relay Computer</a>
<a role=button class=navbar-burger aria-label=menu aria-expanded=false data-target=navMenu><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div class=navbar-menu id=navMenu><div class=navbar-end><a href=/ class=navbar-item>Home</a>
<a href=/pages/overview/ class=navbar-item>Overview</a>
<a href=/pages/progress/ class=navbar-item>Progress</a>
<a href=/cards/ class=navbar-item>Cards</a>
<a href=/posts/ class="navbar-item is-active">Posts</a>
<a href=/tags/ class=navbar-item>Tags</a></div></div></div></nav><section class="hero is-bold is-small is-primary"><div class="hero-body pb-3 pt-4"><div class=container><h1 class="title is-size-4">16-bit Register Design</h1><h2 class=subtitle></h2></div></div></section><section class="section has-background-white"><div class=container><div class=columns><div class="column is-three-quarters-widescreen"><div class=content><p>In my last couple of posts I&rsquo;ve been building up to a change of approach in how I&rsquo;m making the cards in my
computer. This is mainly because I can&rsquo;t face the monotony of hand building the upcoming register cards (which
I&rsquo;ll need three of so it&rsquo;s triple the procrastination holding me back). The obvious solution to all of this is
to create a Printed Circuit Board (PCB) which will cut out most of the trickier soldering and pretty much all
the repetitive wirewrap &mldr; and that looked like the way to go until I had a go at hand crafting a simplified
PCB for the Y backplane and I realised it&rsquo;s not as easy as it might otherwise appear.</p><p>Well OK, yes, the Y backplane did work but not without a lot of tweaks and repairs and that was just a simple single
sided PCB. The registers boards are far more complicated and there&rsquo;s no way I can design a single sided board
without having lots of lines crossing over each other. The &lsquo;fix&rsquo; here is to make a double sided PCB with tracks on
both sides and with vias (tiny solder filled holes) passing the signals/line from front to back etc. I did a few
rough drafts on paper to get a feel for how the board would look and what lines would need to go where but it soon
dawned on me that I&rsquo;d end up with more work than my original approach and with likely more mistakes and problems.</p><p>So, what to do then? Well it seems that maybe it&rsquo;s time to wave my little white flag, accept some level of defeat and
hand the hard work over to the &lsquo;big boys&rsquo;. That&rsquo;s right, I&rsquo;ll farm out the manufacturing of the PCB to a professional
outfit who can do a decent job. In some ways this feels a little bit like &lsquo;cheating&rsquo; although it wouldn&rsquo;t be the first
time I&rsquo;ve taken a shortcut (using a modern memory chip rather than a house full of relays for example). I&rsquo;ve kind of
convinced myself that getting someone else to make my PCBs is acceptable though as I&rsquo;m not setting out to prove I can
make a computer from the most basic of ingredients just to make a computer that works, has some connection with the
original relay computers and ultimately is enjoyable to build (this is a hobby project after all).</p><p>There&rsquo;s quite a bit of choice when it comes to picking a PCB manufacturing house but after several recommendations I&rsquo;ve
gone with <a href=https://jlcpcb.com>JLCPCB</a>. Although there&rsquo;s a minimum order quantity of 5 (which works out quite well for my
register cards) the per-board card is impressively cheap but even more impressive is that they have a free design software
offering <a href=https://easyeda.com>EasyEDA</a> which makes it easy to design your PCBs. Yea, I guess there&rsquo;s a bit of vendor lock-in
here perhaps but it looks like you can export to other file formats and there&rsquo;s a native Mac client which pretty much had
me sold.</p><p>So, a fair bit of preamble there then but that gets me to the point where I&rsquo;m now ready to design a register card in EasyEDA.
My goal is to design a card that has two 8-bit registers that read and write from/to the data bus (much like the registers
built so far) but that can also be paired up in to a 16-bit register that gates to/from the address bus. Looking back to the design of the 8-bit A/D register we ended up with this:</p><figure><img src=/img/posts/2014/2014-04-20-0004.png alt="Complete AD Register"><figcaption markdown=span>Complete AD Register (<a href=/img/posts/2014/2014-04-20-1004.png>larger</a>)</figcaption></figure><p>This schematic was produced in OmniGraffle on my Mac and is, to all intents and purposes, just a picture. What makes EasyEDA
such a leap forward is that doing the schematic design in that captures what the components actually are and how they connect
to each other. This makes it easy to produce lists of parts and ultimately to transform the schematic into a PCB. Anyho, I&rsquo;m
getting ahead of myself. I need to reproduce the OmniGraffle design in EasyEDA &mldr; let&rsquo;s start with the most basic element &mldr;
a 1-bit register unit:</p><figure><img src=/img/posts/2019/2019-07-15-0000.png alt="1-bit Register Unit"></figure><p>R0 in the schematic is the input/output to the unit. Supplying power to this line activates the relay and then as long as
power is supplied to the Hold line that relay will be kept activated. Dropping the Hold line resets the relay. All the
basic functionality is handled on the right hand side of the relay. The left hand side allows a LED to display the current
state of the register bit without complicating the primary circuitry on the right. As always there&rsquo;s a flyback diode over the
relay coil to absorb the spike when the relay is deactivated.</p><p>From this basic 1-bit register design it&rsquo;s fairly trivial to connect eight units together to make an 8-bit register:</p><figure><img src=/img/posts/2019/2019-07-15-0001.png alt="8-bit Register Unit"><figcaption markdown=span>8-bit Register Unit (<a href=/img/posts/2019/2019-07-15-1001.png>larger</a>)</figcaption></figure><p>Note that the Hold line is shared across all the relay &lsquo;bits&rsquo; so that the register can be held/cleared as one but that each
individual &lsquo;bit&rsquo; has its own input/output line R0-R7. To get two 8-bit registers we just double up the design:</p><figure><img src=/img/posts/2019/2019-07-15-0002.png alt="2 x 8-bit Register Units"><figcaption markdown=span>2 x 8-bit Register Units (<a href=/img/posts/2019/2019-07-15-1002.png>larger</a>)</figcaption></figure><p>The data input/output lines continue on from R8 thru RF but note that the hold line is different. The first 8-bits use a HoldL line and the next 8-bits use a HoldH line. This refers to High and Low hold lines which allows either the high (R8-RF)
or low (R0-R7) register to be held or cleared as required. Effectively each 8-bit register can be loaded/cleared independently
as and where required. We&rsquo;ll come back to the control circuitry that drives this in a bit but let&rsquo;s look at the bus gating
next:</p><figure><img src=/img/posts/2019/2019-07-15-0003.png alt="1-bit Gating"></figure><p>In this case we&rsquo;re looking at the gating for register bits R6 and R7 (the highest bits of the low 8-bit register). R6 and R7
connect to the register bits in the schematics above and the gating relays allow that input/output line to be gated to either
D6 and D7 of the data bus or A6 and A7 of the address bus. EnL enables the gating to the data bus and the line at the bottom
of this schematic (EnHL) gates to the address bus. Again, we can extend this design out to gate a full 8-bit register:</p><figure><img src=/img/posts/2019/2019-07-15-0004.png alt="8-bit Gating"><figcaption markdown=span>8-bit Gating (<a href=/img/posts/2019/2019-07-15-1004.png>larger</a>)</figcaption></figure><p>&mldr; and onwards to gate the two 8-bit registers as independant units or together as a single 16-bit register &mldr;</p><figure><img src=/img/posts/2019/2019-07-15-0005.png alt="2 x 8-bit Gating"><figcaption markdown=span>2 x 8-bit Gating (<a href=/img/posts/2019/2019-07-15-1005.png>larger</a>)</figcaption></figure><p>Note that EnL (lower 8-bit register) gates R0 - R7 to D0 - D7, as you&rsquo;d expect, but EnH (upper 8-bit register) gates R8 - RF also to D0 - D7. This makes sense because there&rsquo;s only one 8-bit data bus and if you wanted to load the full 16-bit register
from there you&rsquo;d need to load the lower 8-bits first and then the upper 8-bits. Of course, there only needs to be one EnHL for
the 16-bit address bus which gates A0-AF to R0-RF. Right, that&rsquo;s the register relays and the gating &mldr; let&rsquo;s return to the
control circuitry:</p><figure><img src=/img/posts/2019/2019-07-15-0006.png alt="Low Register Control"></figure><p>This handles the HoldL and EnL lines we&rsquo;ve already seen for the lower 8-bit register. The inputs to this circuit are SelL to
write to the data bus and LdL to load from the data bus. Selecting the register to write to the data bus is very easy &mldr; we
just activate the gating relays. Load is a bit more involved however. To load we need to disconnect the hold line (which
clears any value held in the lower register) but also we need to activate the gating relays to bring in the value on the data
bus. Interestingly here the HoldL comes in from HoldHL and this is so that by default both 8-bit registers are holding their
value and if we want to load one independently we need to veto that hold. If both registers are being loaded together then the
HoldHL line is dropped which achieves the same as far as holding is concerned. We can now repeat this design as you&rsquo;d expect:</p><figure><img src=/img/posts/2019/2019-07-15-0007.png alt="Register Control"><figcaption markdown=span>Register Control (<a href=/img/posts/2019/2019-07-15-1007.png>larger</a>)</figcaption></figure><p>So that gives us the three main components of a register: storage bits, gating and control. We finally need a way to connect
the register to the outside World and that&rsquo;s where the card connectors come in. In the schematic they&rsquo;re represented as
follows:</p><figure><img src=/img/posts/2019/2019-07-15-0008.png alt="Card Connectors"><figcaption markdown=span>Card Connectors (<a href=/img/posts/2019/2019-07-15-1008.png>larger</a>)</figcaption></figure><p>This now brings us to one final minor problem. I want to make three 16-bit register cards however there&rsquo;s something stopping
them from being created identically. The three registers will be M (M1 and M2), J (J1 and J2) and XY (X and Y). The difference
here is that each will respond to different control signals to ensure that if you&rsquo;re loading, say, the lower 8-bit M1 register
you don&rsquo;t impact to lower 8-bit X register. I need some way of &lsquo;configuring&rsquo; each register card to make it M, J or XY
specific. The simplest solution here is to have a jumper block that I can set a wirewrap link on:</p><figure><img src=/img/posts/2019/2019-07-15-0009.png alt="Configuration Jumpers"></figure><p>&mldr; and with that we have a complete design for a 16-bit register with independently controllable upper and lower 8-bit
&lsquo;sub-registers&rsquo;. As usual there&rsquo;s a version of the full design <a href=/pdf/register-jmxy.pdf>here in PDF format</a>. In my next post I&rsquo;ll go through how this schematic becomes a PCB design that can be sent off to JLCPCB for manufacturing.</p></div><div class="field is-grouped is-grouped-multiline"><div class=control><span class="tags has-addons"><span class="tag is-link">Published</span>
<span class="tag is-info">Jul 15, 2019</span></span></div><div class=control><a href=/cards/register-j class="tags has-addons"><span class="tag is-link">Card</span>
<span class="tag is-info">register-j</span></a></div><div class=control><a href=/cards/register-m class="tags has-addons"><span class="tag is-link">Card</span>
<span class="tag is-info">register-m</span></a></div><div class=control><a href=/cards/register-xy class="tags has-addons"><span class="tag is-link">Card</span>
<span class="tag is-info">register-xy</span></a></div></div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/tags/design/ class=tags><span class="tag is-primary">design</span></a></div><div class=control><a href=/tags/registers/ class=tags><span class="tag is-primary">registers</span></a></div></div><div class=columns><div class=column><span class=has-text-weight-semibold>Previous Post</span><br><a href=/posts/2019/03/making-a-pcb/>Making a PCB</a></div><div class="column has-text-right"><span class=has-text-weight-semibold>Next Post</span><br><a href=/posts/2019/08/16bit-register-pcb-design/>16-bit Register PCB Design</a></div></div></div></div></div></section><section class="hero is-small is-success"><div class="hero-body py-1"></div></section><footer class="footer pt-5"><div class=container><div class=columns><div class=column><p class=has-text-weight-semibold>On this blog</p><p><a href=https://relaycomputer.co.uk/>Home</a></p><p><a href=https://relaycomputer.co.uk/posts/>Posts</a></p><p><a href=https://relaycomputer.co.uk/tags/>Tags</a></p><p><a href=https://relaycomputer.co.uk/pages/progress/>Progress</a></p></div><div class=column><p class=has-text-weight-semibold>Related sites</p><p><a href=https://www.youtube.com/channel/UCDn07eKw2HDPIgSAGQgliAA><span class="fab fa-youtube fa-lg fa-fw"></span> YouTube Channel</a></p><p><a href=https://github.com/paul80nd><span class="fab fa-github fa-lg fa-fw"></span> GitHub Repos</a></p><p><a href=https://editor.relaycomputer.co.uk><span class="fas fa-code fa-lg fa-fw"></span> Relay Code Editor</a></p><p><a href=https://simulator.relaycomputer.co.uk><span class="fas fa-flask fa-lg fa-fw"></span> Relay Simulator</a></p></div><div class=column><p class=has-text-weight-semibold>Share this page</p><p><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2frelaycomputer.co.uk%2fposts%2f2019%2f07%2f16bit-register-design%2f&quote=16-bit%20Register%20Design" target=_blank title="Share on Facebook"><i class="fab fa-facebook-square fa-2x" aria-hidden=true></i><span class=sr-only>Share on Facebook</span></a>
<a href="https://twitter.com/intent/tweet?source=https%3a%2f%2frelaycomputer.co.uk%2fposts%2f2019%2f07%2f16bit-register-design%2f&text=16-bit%20Register%20Design:https%3a%2f%2frelaycomputer.co.uk%2fposts%2f2019%2f07%2f16bit-register-design%2f" target=_blank title=Tweet><i class="fab fa-twitter-square fa-2x" aria-hidden=true></i><span class=sr-only>Tweet</span></a>
<a href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2frelaycomputer.co.uk%2fposts%2f2019%2f07%2f16bit-register-design%2f&description=16-bit%20Register%20Design" target=_blank title="Pin it"><i class="fab fa-pinterest-square fa-2x" aria-hidden=true></i><span class=sr-only>Pin it</span></a>
<a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2frelaycomputer.co.uk%2fposts%2f2019%2f07%2f16bit-register-design%2f&title=16-bit%20Register%20Design&source=https%3a%2f%2frelaycomputer.co.uk%2fposts%2f2019%2f07%2f16bit-register-design%2f" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin fa-2x" aria-hidden=true></i><span class=sr-only>Share on LinkedIn</span></a>
<a href="mailto:?subject=16-bit%20Register%20Design&body=https%3a%2f%2frelaycomputer.co.uk%2fposts%2f2019%2f07%2f16bit-register-design%2f" target=_blank title="Send email"><i class="fas fa-envelope-square fa-2x" aria-hidden=true></i><span class=sr-only>Send email</span></a></p></div></div></div></footer></body></html>