<!DOCTYPE html>
<html lang="en">

  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Sequencer Design: Schematic &amp; PCBs | Relay Computer</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Sequencer Design: Schematic &amp; PCBs" />
<meta name="author" content="Paul Law" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’ve got the designs for the 24-cycle FSM and pulse distribution in place so all that’s left for the sequencer is to bring the schematics together and then design the PCBs … and yup, that’s PCBs plural as this is going to be another part of the computer that is complicated enough to need spreading over two interconnected cards. The way I can tell this is a ‘two card job’ is purely down to the number of relays I’ve used. In this case the total comes to 60 and if you’re really packing them in (6 rows of 8 relays) you can just about get away with a maximum of 48 per card." />
<meta property="og:description" content="I’ve got the designs for the 24-cycle FSM and pulse distribution in place so all that’s left for the sequencer is to bring the schematics together and then design the PCBs … and yup, that’s PCBs plural as this is going to be another part of the computer that is complicated enough to need spreading over two interconnected cards. The way I can tell this is a ‘two card job’ is purely down to the number of relays I’ve used. In this case the total comes to 60 and if you’re really packing them in (6 rows of 8 relays) you can just about get away with a maximum of 48 per card." />
<link rel="canonical" href="https://relaycomputer.co.uk/2019/11/sequencer-design-pcb" />
<meta property="og:url" content="https://relaycomputer.co.uk/2019/11/sequencer-design-pcb" />
<meta property="og:site_name" content="Relay Computer" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-11-11T03:03:00+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Paul Law"},"url":"https://relaycomputer.co.uk/2019/11/sequencer-design-pcb","description":"I’ve got the designs for the 24-cycle FSM and pulse distribution in place so all that’s left for the sequencer is to bring the schematics together and then design the PCBs … and yup, that’s PCBs plural as this is going to be another part of the computer that is complicated enough to need spreading over two interconnected cards. The way I can tell this is a ‘two card job’ is purely down to the number of relays I’ve used. In this case the total comes to 60 and if you’re really packing them in (6 rows of 8 relays) you can just about get away with a maximum of 48 per card.","headline":"Sequencer Design: Schematic &amp; PCBs","@type":"BlogPosting","datePublished":"2019-11-11T03:03:00+00:00","dateModified":"2019-11-11T03:03:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://relaycomputer.co.uk/2019/11/sequencer-design-pcb"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<!-- Begin CSS Styles -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,500,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,500,700" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/app.css">
<!-- End CSS Styles -->



<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link type="application/atom+xml" rel="alternate" href="https://relaycomputer.co.uk/feed.xml" title="Relay Computer" />

<!-- Begin EU Cookie Consent -->
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "#f1d600"
    }
  }
})});
</script>
<!-- End EU Cookie Consent -->


    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47484999-2', 'auto');
	ga('send', 'pageview', { 'page': location.pathname + location.search + location.hash});
	ga('set', 'anonymizeIp', false);
    </script>
    <!-- End Google Analytics -->
    </head>


  <body>
      <nav class="navbar is-primary" >
        <div class="container">
            <div class="navbar-brand">
                <a href="/" class="navbar-item">
                    Relay Computer
                </a>
                <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>
            <div class="navbar-menu" id="navMenu">
                <div class="navbar-start">
                    <a href="/" class="navbar-item ">Home</a>
                    
                    
                        
                        <a href="/pages/overview.html" class="navbar-item ">Overview</a>
                        
                    
                        
                        <div class="navbar-item has-dropdown is-hoverable">
                            <a href="/#" class="navbar-link ">Summaries</a>
                            <div class="navbar-dropdown">
                                
                                <a href="/pages/progress.html" class="navbar-item ">Progress</a>
                                
                                <a href="/pages/instructions.html" class="navbar-item ">Instructions</a>
                                
                                <a href="/pages/alu.html" class="navbar-item ">ALU</a>
                                
                                <a href="/pages/control.html" class="navbar-item ">Control</a>
                                
                                <a href="/pages/enclosure.html" class="navbar-item ">Enclosure</a>
                                
                                <a href="/pages/registers.html" class="navbar-item ">Registers</a>
                                
                                <a href="/pages/ui.html" class="navbar-item ">UI</a>
                                
                            </div>
                        </div>
                        
                    
                        
                        <a href="/archive.html" class="navbar-item ">Archive</a>
                        
                    
                        
                        <a href="/tags.html" class="navbar-item ">Tags</a>
                        
                    
                    
                </div>
            </div>
        </div>
    </nav>

      
        <section class="hero is-bold is-primary" >
    <div class="hero-body">
        <div class="container">                
            <h1 class="title ">Sequencer Design: Schematic & PCBs</h1>
            <h2 class="subtitle"></h2>
        </div>
    </div>
</section>
      

      <section class="section">
        <div class="container">
              <div class="columns">
  <div class="column is-three-quarters-widescreen">
    <div class="content">

      <p>I’ve got the designs for the 24-cycle FSM and pulse distribution in place so all that’s left for the sequencer is to bring
the schematics together and then design the PCBs … and yup, that’s PCBs plural as this is going to be another part of the
computer that is complicated enough to need spreading over two interconnected cards. The way I can tell this is a ‘two card
job’ is purely down to the number of relays I’ve used. In this case the total comes to 60 and if you’re really packing
them in (6 rows of 8 relays) you can just about get away with a maximum of 48 per card.</p>

<p>So, two cards it is. The other choice is deciding where to split the design (i.e. what goes on the ‘upper’ card and what on
the ‘lower’). In this case it seems sensible to place the 8, 10 and 12 cycles plus derived pulses on the lower card and
then the remaining 14 and 24 cycles on the upper card. The other consideration is fitting the status LEDs on the front of
the cards (and splitting this way fits nicely) and then what signals need to pass between upper and lower cards.</p>

<p>Given I’ve already introduced the FSM and pulse distribution schematics in my last posts I’ll cut straight to the chase and
you can find the consolidated <a href="/assets/pdf/sequencer-hi.pdf">upper sequencer schematic here</a> and the
<a href="/assets/pdf/sequencer-lo.pdf">lower sequencer schematic here</a> (both in PDF format). In both cases the card is largely
defined by the backplane connectors it uses … W1 for the upper card (made up of address, operation and pulse busses) and W2
for the lower card (made up of Control X, Y and Z busses). This is similar to the existing pair of controller cards which also
talk to enough of the computer to need access to all the busses offered by the W1 and W2 type connectors.</p>

<p>For the PCB design we follow the same basic steps as before for the Y backplane register: place components that have to be in
a certain location first; place other components in rough logical groups; lay tracks; build ground/power planes; add text
labels etc. In this case we’ll also need to pass additional signals between the cards via an ‘interconnect’. Let’s start then
with the backplane connectors as these pre-exist on the W backplane and have to be in a certain location:</p>

<figure><img src="/assets/img/posts/2019/2019-11-11-0000.png" alt="W1 Connectors (Upper Card)" />
  
</figure>

<figure><img src="/assets/img/posts/2019/2019-11-11-0001.png" alt="W2 Connectors (Lower Card)" />
  
</figure>

<p>Note that the ‘JLCJLCJLCJLC’ text in the top right corner is to let my PCB manufacture know where I’d like them to put their
identification code so they can find my PCB amongst all the others they’ll be making. If I don’t specify the location then the
manufacturer decides for me and invariably puts it somewhere annoying. In this case I want it underneath a socket so they
can see it but I wont. Next up is the LEDs:</p>

<figure><img src="/assets/img/posts/2019/2019-11-11-0002.png" alt="LEDs (Upper Card)" />
  
</figure>

<figure><img src="/assets/img/posts/2019/2019-11-11-0003.png" alt="LEDs (Lower Card)" />
  
</figure>

<p>Although it’s not specified on the schematic or the PCB I’ll stick with my usual convention for LED colours and use
green for the pulses (representing a ‘result’ output of the card), yellow for the abort signals (representing command/control
inputs to the card) and red for everything else (the FSM stages in this case).</p>

<p>I now need to place the relays, diodes and card interconnects. This often involves just moving things around until there’s a
nice fit and the ratlines (showing the connections needed between components) are looking reasonably tidy.</p>

<figure><img src="/assets/img/posts/2019/2019-11-11-0004.png" alt="Basic layout (Upper Card)" />
  
</figure>

<figure><img src="/assets/img/posts/2019/2019-11-11-0005.png" alt="Basic layout (Lower Card)" />
  
</figure>

<p>I’ve also labeled the card now I’ve put everything in position. I find this just helps a little when moving
on to the most time consuming part of PCB design … laying down the tracks. A good place to start is routing groups of
related signals that are heading in the same direction - busses are good examples of this:</p>

<figure><img src="/assets/img/posts/2019/2019-11-11-0006.png" alt="Upper card pulse bus" />
  
  <figcaption>Upper card pulse bus</figcaption>
</figure>

<figure><img src="/assets/img/posts/2019/2019-11-11-0007.png" alt="Upper card pulse LEDs" />
  
  <figcaption>Upper card pulse LEDs</figcaption>
</figure>

<figure><img src="/assets/img/posts/2019/2019-11-11-0008.png" alt="Lower card FSM outputs" />
  
  <figcaption>Lower card FSM outputs</figcaption>
</figure>

<figure><img src="/assets/img/posts/2019/2019-11-11-0009.png" alt="Lower card FSM LEDs" />
  
  <figcaption>Lower card FSM LEDs</figcaption>
</figure>

<p>It’s then just a case of laying down tracks between groups of relays and any other remaining signals. Another rule I tend to
follow is to try and keep the tracks on the front of the card going vertical and then route horizontally on the rear of the
card:</p>

<figure><img src="/assets/img/posts/2019/2019-11-11-0010.png" alt="vertical and horizontal routing (Lower Card)" />
  
</figure>

<p>Another good use of laying tracks on the rear of the card is if you’re squeezed for space on the front:</p>

<figure><img src="/assets/img/posts/2019/2019-11-11-0011.png" alt="squeezing tracks in (Lower Card)" />
  
</figure>

<p>… this tends to work best when near the edge of the card so that it leaves plenty of space for the copper pours. The pours
create a large area of copper that fills any space not used up by tracks. This also gives me somewhere to route the ground
lines (which come off pretty much every active component) and also the power lines. It’s quite common to have a power plane
on one side of the board and a ground on the other but I tend to have ground on both sides (to ensure ground can get around
any areas where there’s a lot of tracks) and then route a ‘power river’ through the rear ground plane:</p>

<figure><img src="/assets/img/posts/2019/2019-11-11-0012.png" alt="Copper Pour (Upper Card)" />
  
</figure>

<figure><img src="/assets/img/posts/2019/2019-11-11-0013.png" alt="Copper Pour (Lower Card)" />
  
</figure>

<p>All that’s left then is just to have a good close up inspection of the board to make sure everything is placed well and
tracks are routed properly. There’s several built-in tools that help with this such as the DRC which’ll check that pad sizes,
track widths, spaces between items and so on are within the abilities of your chosen manufacturer. In my case I’m well outside
of those minimum tolerances. Another good idea is to produce a ‘realistic’ image of the final board design to have a last
visual check:</p>

<figure>
  <img src="/assets/img/posts/2019/2019-11-11-0014.png" alt="Upper Card (front)" />
  <img src="/assets/img/posts/2019/2019-11-11-0015.png" alt="Upper Card (rear)" />
  
  <figcaption>Upper Card (front and rear)</figcaption>
</figure>

<figure>
  <img src="/assets/img/posts/2019/2019-11-11-0016.png" alt="Lower Card (front)" />
  <img src="/assets/img/posts/2019/2019-11-11-0017.png" alt="Lower Card (rear)" />
  
  <figcaption>Lower Card (front and rear)</figcaption>
</figure>

<p>If you’d like to take a closer look at any of these you can find the full colour previews in PDF format
<a href="/assets/pdf/sequencer-hi-pcbp.pdf">here for the upper card</a> and <a href="/assets/pdf/sequencer-lo-pcbp.pdf">here for the lower card</a>.
There’s also another version <a href="/assets/pdf/sequencer-hi-pcb.pdf">here for the upper card</a> and
<a href="/assets/pdf/sequencer-lo-pcb.pdf">here for the lower card</a> which seperates the layers out.</p>

<p>That’s the sequencer design fully complete so all that’s left is to send it off to the manufacturer and wait for the
PCBs to arrive in the post … once they arrive it’s soldering time.</p>


    </div>

    <div class="field is-grouped is-grouped-multiline">
      <div class="control">
        <a href="/archive#2019" class="tags has-addons">
          <span class="tag is-link">Published</span>
          <span class="tag is-info">Nov 11, 2019</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#sequencing" class="tags">
          <span class="tag is-primary">sequencing</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#design" class="tags">
          <span class="tag is-primary">design</span>
        </a>
      </div>
      
    </div>

    <div class="columns">
      <div class="column">
        
          <span class="has-text-weight-semibold">Previous Post</span><br />
          <a href="/2019/11/sequencer-design-pulse-dist">Sequencer Design: Pulse Distribution</a>
                
      </div>
      <div class="column has-text-right">
        
          <span class="has-text-weight-semibold">Next Post</span><br />
          <a href="/2019/11/sequencer-construction">Sequencer Construction</a>
                
      </div>
    </div>

  </div>
</div>
        </div>
      </section>
          
      <footer class="footer">
    <div class="container">
        <div class="columns">
            <div class="column">   
                <h3>On this blog</h3>  
                <p><a href="/index.html">Home</a></p>
                <p><a href="/archive">Archive</a></p>
                <p><a href="/tags">Tags</a></p>
                <p><a href="/pages/progress">Progress</a></p>
            </div>        
            <div class="column">
                <h3>Related sites</h3>
                <p><a href="https://www.youtube.com/channel/UCDn07eKw2HDPIgSAGQgliAA"><span class="fab fa-youtube fa-lg fa-fw"></span> YouTube Channel</a></p>
                <p><a href="https://github.com/paul80nd"><span class="fab fa-github fa-lg fa-fw"></span> GitHub Repos</a></p>
                <p><a href="http://simulator.relaycomputer.co.uk"><span class="fas fa-flask fa-lg fa-fw"></span> Relay Simulator</a></p>
            </div>
            <div class="column">
                <h3>Share on social media</h3>
                <p><a href="https://www.facebook.com/sharer/sharer.php?u=&amp;quote=" target="_blank"><span class="fab fa-facebook fa-lg fa-fw"></span> Share on Facebook</a></p>
                <p><a href="https://twitter.com/intent/tweet?source=&amp;text=" target="_blank"><span class="fab fa-twitter fa-lg fa-fw"></span> Tweet</a></p>
                <p><a href="http://www.tumblr.com/share?v=3&amp;u=&amp;quote=&amp;s=" target="_blank"><span class="fab fa-tumblr fa-lg fa-fw"></span> Post to Tumblr</a></p> 
                <p><a href="http://pinterest.com/pin/create/button/?url=&amp;description=" target="_blank"><span class="fab fa-pinterest fa-lg fa-fw"></span> Pin it</a></p> 
                <p><a href="http://www.reddit.com/submit?url=&amp;title=" target="_blank"><span class="fab fa-reddit fa-lg fa-fw"></span> Submit to Reddit</a></p>   
                <p><a href="mailto:?subject=&amp;body=" target="_blank"><span class="fas fa-envelope fa-lg fa-fw"></span> Send email</a></p> 
            </div>
        </div>                    
    </div>
</footer>

      <script src="/assets/js/app.js" type="text/javascript"></script>
  </body>

</html>