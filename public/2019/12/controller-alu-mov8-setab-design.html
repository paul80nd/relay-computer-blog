<!DOCTYPE html>
<html lang="en">

  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Controller Design: ALU, MOV8 &amp; SETAB Instructions | Relay Computer</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Controller Design: ALU, MOV8 &amp; SETAB Instructions" />
<meta name="author" content="Paul Law" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In my last post I covered off the controller design for the GOTO instruction. Being as I’ve decided to implement the controller on a new set of PCB cards I need to transfer over the existing ALU, MOV8 &amp; SETAB instructions to the new controller design. At the relay level nothing really changes so I’ll just quickly recap the timing and implementations here using the new schematic style and then in my next post I can move on to putting the full controller schematic and PCB design together." />
<meta property="og:description" content="In my last post I covered off the controller design for the GOTO instruction. Being as I’ve decided to implement the controller on a new set of PCB cards I need to transfer over the existing ALU, MOV8 &amp; SETAB instructions to the new controller design. At the relay level nothing really changes so I’ll just quickly recap the timing and implementations here using the new schematic style and then in my next post I can move on to putting the full controller schematic and PCB design together." />
<link rel="canonical" href="https://relaycomputer.co.uk/2019/12/controller-alu-mov8-setab-design" />
<meta property="og:url" content="https://relaycomputer.co.uk/2019/12/controller-alu-mov8-setab-design" />
<meta property="og:site_name" content="Relay Computer" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-07T03:03:00+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Paul Law"},"url":"https://relaycomputer.co.uk/2019/12/controller-alu-mov8-setab-design","description":"In my last post I covered off the controller design for the GOTO instruction. Being as I’ve decided to implement the controller on a new set of PCB cards I need to transfer over the existing ALU, MOV8 &amp; SETAB instructions to the new controller design. At the relay level nothing really changes so I’ll just quickly recap the timing and implementations here using the new schematic style and then in my next post I can move on to putting the full controller schematic and PCB design together.","headline":"Controller Design: ALU, MOV8 &amp; SETAB Instructions","@type":"BlogPosting","datePublished":"2019-12-07T03:03:00+00:00","dateModified":"2019-12-07T03:03:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://relaycomputer.co.uk/2019/12/controller-alu-mov8-setab-design"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<!-- Begin CSS Styles -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,500,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,500,700" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/app.css">
<!-- End CSS Styles -->



<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link type="application/atom+xml" rel="alternate" href="https://relaycomputer.co.uk/feed.xml" title="Relay Computer" />

<!-- Begin EU Cookie Consent -->
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "#f1d600"
    }
  }
})});
</script>
<!-- End EU Cookie Consent -->


    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47484999-2', 'auto');
	ga('send', 'pageview', { 'page': location.pathname + location.search + location.hash});
	ga('set', 'anonymizeIp', false);
    </script>
    <!-- End Google Analytics -->
    </head>


  <body>
      <nav class="navbar is-primary" >
        <div class="container">
            <div class="navbar-brand">
                <a href="/" class="navbar-item">
                    Relay Computer
                </a>
                <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>
            <div class="navbar-menu" id="navMenu">
                <div class="navbar-start">
                    <a href="/" class="navbar-item ">Home</a>
                    
                    
                        
                        <a href="/pages/overview.html" class="navbar-item ">Overview</a>
                        
                    
                        
                        <div class="navbar-item has-dropdown is-hoverable">
                            <a href="/#" class="navbar-link ">Summaries</a>
                            <div class="navbar-dropdown">
                                
                                <a href="/pages/progress.html" class="navbar-item ">Progress</a>
                                
                                <a href="/pages/instructions.html" class="navbar-item ">Instructions</a>
                                
                                <a href="/pages/alu.html" class="navbar-item ">ALU</a>
                                
                                <a href="/pages/control.html" class="navbar-item ">Control</a>
                                
                                <a href="/pages/enclosure.html" class="navbar-item ">Enclosure</a>
                                
                                <a href="/pages/registers.html" class="navbar-item ">Registers</a>
                                
                                <a href="/pages/ui.html" class="navbar-item ">UI</a>
                                
                            </div>
                        </div>
                        
                    
                        
                        <a href="/archive.html" class="navbar-item ">Archive</a>
                        
                    
                        
                        <a href="/tags.html" class="navbar-item ">Tags</a>
                        
                    
                    
                </div>
            </div>
        </div>
    </nav>

      
        <section class="hero is-bold is-primary" >
    <div class="hero-body">
        <div class="container">                
            <h1 class="title ">Controller Design: ALU, MOV8 & SETAB Instructions</h1>
            <h2 class="subtitle"></h2>
        </div>
    </div>
</section>
      

      <section class="section">
        <div class="container">
              <div class="columns">
  <div class="column is-three-quarters-widescreen">
    <div class="content">

      <p>In my last post I covered off the controller design for the GOTO instruction. Being as I’ve decided to implement the
controller on a new set of PCB cards I need to transfer over the existing ALU, MOV8 &amp; SETAB instructions to the new
controller design. At the relay level nothing really changes so I’ll just quickly recap the timing and implementations here
using the new schematic style and then in my next post I can move on to putting the full controller schematic and PCB design
together.</p>

<p>Let’s cover the three instructions off in order of complexity:</p>

<h3 id="setab-load-immediate">SETAB: Load Immediate</h3>

<p>The SETAB instruction loads an immediate value in to either the A or B register. This is a really useful and quick way to get
a value loaded in ready for performing further ALU calculations. The value to be loaded is limited though due to the number of
available bits in the instruction opcode:</p>

<article class="box">
    <div class="content">
        <h4>Load Immediate</h4>
        <div class="field is-grouped is-grouped-multiline is-family-monospace">
            <div class="control">
                <div class="tags has-addons are-medium">
                    <span class="tag is-primary">SETAB</span>
                    <span class="tag is-success">8</span>
                </div>
            </div>              
            <div class="control">
                <div class="tags has-addons are-medium" style="margin-bottom: 0;">
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">1</span>
                    <span class="tag is-info">r</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                </div>
                
            </div>        
        </div>
        <pre class="is-size-7"><code>    r = destination register (0-A, 1-B)<br />ddddd = value (-16..15)</code></pre>
    </div> 
</article>

<p>Here’s the associated timing chart for the SETAB instruction:</p>

<figure><img src="/assets/img/posts/2019/2019-12-07-0000.png" alt="SETAB opcode timing chart" />
  
  <figcaption>SETAB opcode timing chart (<a href="/assets/pdf/timing-setab.pdf">larger</a>)</figcaption>
</figure>

<p>This is all very straightforward to implement in relays:</p>

<figure><img src="/assets/img/posts/2019/2019-12-07-0003.png" alt="SETAB schematic" />
  
  <figcaption>SETAB schematic (<a href="/assets/img/posts/2019/2019-12-07-1003.png">larger</a>)</figcaption>
</figure>

<p>The only thing that perhaps needs a brief explanation is the CHAT line on the right. This is activated early in the
fetch/increment cycle to indicate that the sequencer can now have an abort line set if required. All of the instructions on
this page are 8-cycle and each of the instruction schematics will set AT08 when the CHAT line is active.</p>

<h3 id="alu-arithmeticlogic">ALU: Arithmetic/Logic</h3>

<p>The ALU instruction can perform a number of arithmetic and logic operations on the B and C registers (or just the B register
for operations that only work on one value). The result of the operation can be placed in either the A or D register.</p>

<article class="box">
    <div class="content">
        <h4>ALU Operation</h4>
        <div class="field is-grouped is-grouped-multiline is-family-monospace">
            <div class="control">
                <div class="tags has-addons are-medium">
                    <span class="tag is-primary">ALU</span>
                    <span class="tag is-success">8</span>
                </div>
            </div>              
            <div class="control">
                <div class="tags has-addons are-medium" style="margin-bottom: 0;">
                    <span class="tag is-link">1</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-info">r</span>
                    <span class="tag is-info">f</span>
                    <span class="tag is-info">f</span>
                    <span class="tag is-info">f</span>
                </div>
                
            </div>        
        </div>
        <pre class="is-size-7"><code>  r = destination register (0-A, 1-D)<br />fff = function code (000-NOP, 001-ADD, 010-INC, 011-AND, 100-OR, 101-XOR, 110-NOT, 111-SHL)</code></pre>
    </div> 
</article>

<p>The timing chart for the ALU instruction looks like this:</p>

<figure><img src="/assets/img/posts/2019/2019-12-07-0001.png" alt="ALU opcode timing chart" />
  
  <figcaption>ALU opcode timing chart (<a href="/assets/pdf/timing-alu.pdf">larger</a>)</figcaption>
</figure>

<p>The relay schematic for ALU uses five relays over SETAB’s three but is still easy to understand:</p>

<figure><img src="/assets/img/posts/2019/2019-12-07-0004.png" alt="ALU schematic" />
  
  <figcaption>ALU schematic (<a href="/assets/img/posts/2019/2019-12-07-1004.png">larger</a>)</figcaption>
</figure>

<h3 id="mov-8-8-bit-move">MOV-8: 8-bit Move</h3>

<p>The ‘not so aptly’ named MOV8 instruction copies an 8-bit value from one register to another. If the source and destination
register are the same then the value in that register is cleared:</p>

<article class="box">
    <div class="content">
        <h4>8-Bit Move</h4>
        <div class="field is-grouped is-grouped-multiline is-family-monospace">
            <div class="control">
                <div class="tags has-addons are-medium">
                    <span class="tag is-primary">MOV8</span>
                    <span class="tag is-success">8</span>
                </div>
            </div>              
            <div class="control">
                <div class="tags has-addons are-medium" style="margin-bottom: 0;">
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">s</span>
                    <span class="tag is-info">s</span>
                    <span class="tag is-info">s</span>
                </div>
                
            </div>        
        </div>
        <pre class="is-size-7"><code>ddd = destination register (000-A, 001-B, 010-C, 011-D, 100-M1, 101-M2, 110-X, 111-Y)<br />sss = source register      (000-A, 001-B, 010-C, 011-D, 100-M1, 101-M2, 110-X, 111-Y)</code></pre>
    </div> 
</article>

<p>Here’s the MOV-8 timing chart:</p>

<figure><img src="/assets/img/posts/2019/2019-12-07-0002.png" alt="MOV8 opcode timing chart" />
  
  <figcaption>MOV8 opcode timing chart (<a href="/assets/pdf/timing-mov8.pdf">larger</a>)</figcaption>
</figure>

<p>The schematic for MOV-8 has a lot more relays going on but mostly that’s around decoding the source and destination registers
for the operation:</p>

<figure><img src="/assets/img/posts/2019/2019-12-07-0005.png" alt="MOV8 schematic" />
  
  <figcaption>MOV8 schematic (<a href="/assets/img/posts/2019/2019-12-07-1005.png">larger</a>)</figcaption>
</figure>

<p>You can see there’s quite a few bits of this schematic blanked out. I’ve done that for brevity here but effectively that’s
where the M1, M2, X and Y registers can be selected as a source or destination. I won’t be implementing those for the moment
although as you can probably tell they’re just a couple of relays away.</p>

<p>That it for these instructions. In my next post I’ll bring these together with the GOTO instruction and get the full
controller schematic laid out and design the PCB lay out too and then I’m ready for some more board construction.</p>


    </div>

    <div class="field is-grouped is-grouped-multiline">
      <div class="control">
        <a href="/archive#2019" class="tags has-addons">
          <span class="tag is-link">Published</span>
          <span class="tag is-info">Dec 7, 2019</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#control" class="tags">
          <span class="tag is-primary">control</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#design" class="tags">
          <span class="tag is-primary">design</span>
        </a>
      </div>
      
    </div>

    <div class="columns">
      <div class="column">
        
          <span class="has-text-weight-semibold">Previous Post</span><br />
          <a href="/2019/11/controller-goto-design">Controller Design: GOTO Instruction</a>
                
      </div>
      <div class="column has-text-right">
        
          <span class="has-text-weight-semibold">Next Post</span><br />
          <a href="/2019/12/controller-design-pcb">Controller Design: Schematic & PCBs</a>
                
      </div>
    </div>

  </div>
</div>
        </div>
      </section>
          
      <footer class="footer">
    <div class="container">
        <div class="columns">
            <div class="column">   
                <h3>On this blog</h3>  
                <p><a href="/index.html">Home</a></p>
                <p><a href="/archive">Archive</a></p>
                <p><a href="/tags">Tags</a></p>
                <p><a href="/pages/progress">Progress</a></p>
            </div>        
            <div class="column">
                <h3>Related sites</h3>
                <p><a href="https://www.youtube.com/channel/UCDn07eKw2HDPIgSAGQgliAA"><span class="fab fa-youtube fa-lg fa-fw"></span> YouTube Channel</a></p>
                <p><a href="https://github.com/paul80nd"><span class="fab fa-github fa-lg fa-fw"></span> GitHub Repos</a></p>
                <p><a href="http://simulator.relaycomputer.co.uk"><span class="fas fa-flask fa-lg fa-fw"></span> Relay Simulator</a></p>
            </div>
            <div class="column">
                <h3>Share on social media</h3>
                <p><a href="https://www.facebook.com/sharer/sharer.php?u=&amp;quote=" target="_blank"><span class="fab fa-facebook fa-lg fa-fw"></span> Share on Facebook</a></p>
                <p><a href="https://twitter.com/intent/tweet?source=&amp;text=" target="_blank"><span class="fab fa-twitter fa-lg fa-fw"></span> Tweet</a></p>
                <p><a href="http://www.tumblr.com/share?v=3&amp;u=&amp;quote=&amp;s=" target="_blank"><span class="fab fa-tumblr fa-lg fa-fw"></span> Post to Tumblr</a></p> 
                <p><a href="http://pinterest.com/pin/create/button/?url=&amp;description=" target="_blank"><span class="fab fa-pinterest fa-lg fa-fw"></span> Pin it</a></p> 
                <p><a href="http://www.reddit.com/submit?url=&amp;title=" target="_blank"><span class="fab fa-reddit fa-lg fa-fw"></span> Submit to Reddit</a></p>   
                <p><a href="mailto:?subject=&amp;body=" target="_blank"><span class="fas fa-envelope fa-lg fa-fw"></span> Send email</a></p> 
            </div>
        </div>                    
    </div>
</footer>

      <script src="/assets/js/app.js" type="text/javascript"></script>
  </body>

</html>