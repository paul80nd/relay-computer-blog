<!DOCTYPE html>
<html lang="en">

  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Decoder Design: MOV-8, ALU &amp; SETAB | Relay Computer</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Decoder Design: MOV-8, ALU &amp; SETAB" />
<meta name="author" content="Paul Law" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In my last post I introduced the design for the instruction register which holds the current 8-bit opcode that the computer is executing. The next card to design is the decoder which will take the 8-bit opcode and set either the MOV-8, ALU or SETAB control lines depending which class of instruction the opcode represents. This is actually quite straightforward and just needs a few relays to handle the logic." />
<meta property="og:description" content="In my last post I introduced the design for the instruction register which holds the current 8-bit opcode that the computer is executing. The next card to design is the decoder which will take the 8-bit opcode and set either the MOV-8, ALU or SETAB control lines depending which class of instruction the opcode represents. This is actually quite straightforward and just needs a few relays to handle the logic." />
<link rel="canonical" href="https://relaycomputer.co.uk/2015/01/decoder-design-mov-8-alu-setab" />
<meta property="og:url" content="https://relaycomputer.co.uk/2015/01/decoder-design-mov-8-alu-setab" />
<meta property="og:site_name" content="Relay Computer" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-01-04T22:12:00+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Paul Law"},"url":"https://relaycomputer.co.uk/2015/01/decoder-design-mov-8-alu-setab","description":"In my last post I introduced the design for the instruction register which holds the current 8-bit opcode that the computer is executing. The next card to design is the decoder which will take the 8-bit opcode and set either the MOV-8, ALU or SETAB control lines depending which class of instruction the opcode represents. This is actually quite straightforward and just needs a few relays to handle the logic.","headline":"Decoder Design: MOV-8, ALU &amp; SETAB","@type":"BlogPosting","datePublished":"2015-01-04T22:12:00+00:00","dateModified":"2015-01-04T22:12:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://relaycomputer.co.uk/2015/01/decoder-design-mov-8-alu-setab"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<!-- Begin CSS Styles -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,500,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,500,700" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/app.css">
<!-- End CSS Styles -->



<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link type="application/atom+xml" rel="alternate" href="https://relaycomputer.co.uk/feed.xml" title="Relay Computer" />

<!-- Begin EU Cookie Consent -->
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "#f1d600"
    }
  }
})});
</script>
<!-- End EU Cookie Consent -->


    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47484999-2', 'auto');
	ga('send', 'pageview', { 'page': location.pathname + location.search + location.hash});
	ga('set', 'anonymizeIp', false);
    </script>
    <!-- End Google Analytics -->
    </head>


  <body>
      <nav class="navbar is-primary" >
        <div class="container">
            <div class="navbar-brand">
                <a href="/" class="navbar-item">
                    Relay Computer
                </a>
                <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>
            <div class="navbar-menu" id="navMenu">
                <div class="navbar-start">
                    <a href="/" class="navbar-item ">Home</a>
                    
                    
                        
                        <a href="/pages/overview.html" class="navbar-item ">Overview</a>
                        
                    
                        
                        <div class="navbar-item has-dropdown is-hoverable">
                            <a href="/#" class="navbar-link ">Summaries</a>
                            <div class="navbar-dropdown">
                                
                                <a href="/pages/progress.html" class="navbar-item ">Progress</a>
                                
                                <a href="/pages/instructions.html" class="navbar-item ">Instructions</a>
                                
                                <a href="/pages/alu.html" class="navbar-item ">ALU</a>
                                
                                <a href="/pages/control.html" class="navbar-item ">Control</a>
                                
                                <a href="/pages/enclosure.html" class="navbar-item ">Enclosure</a>
                                
                                <a href="/pages/registers.html" class="navbar-item ">Registers</a>
                                
                                <a href="/pages/ui.html" class="navbar-item ">UI</a>
                                
                            </div>
                        </div>
                        
                    
                        
                        <a href="/archive.html" class="navbar-item ">Archive</a>
                        
                    
                        
                        <a href="/tags.html" class="navbar-item ">Tags</a>
                        
                    
                    
                </div>
            </div>
        </div>
    </nav>

      
        <section class="hero is-bold is-primary" >
    <div class="hero-body">
        <div class="container">                
            <h1 class="title ">Decoder Design: MOV-8, ALU & SETAB </h1>
            <h2 class="subtitle"></h2>
        </div>
    </div>
</section>
      

      <section class="section">
        <div class="container">
              <div class="columns">
  <div class="column is-three-quarters-widescreen">
    <div class="content">

      <p>In my last post I introduced the design for the instruction register 
which holds the current 8-bit opcode that the computer is executing. The next 
card to design is the decoder which will take the 8-bit opcode and set either 
the MOV-8, ALU or SETAB control lines depending which class of instruction the 
opcode represents. This is actually quite straightforward and just needs a few 
relays to handle the logic.</p>

<p>Firstly though lets quickly recap the 
form of those three instruction classes:</p>

<article class="box">
    <div class="content">
        <h4>ALU Operation</h4>
        <div class="field is-grouped is-grouped-multiline is-family-monospace">
            <div class="control">
                <div class="tags has-addons are-medium">
                    <span class="tag is-primary">ALU</span>
                    <span class="tag is-success">8</span>
                </div>
            </div>              
            <div class="control">
                <div class="tags has-addons are-medium" style="margin-bottom: 0;">
                    <span class="tag is-link">1</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-info">r</span>
                    <span class="tag is-info">f</span>
                    <span class="tag is-info">f</span>
                    <span class="tag is-info">f</span>
                </div>
                
            </div>        
        </div>
        <pre class="is-size-7"><code>  r = destination register (0-A, 1-D)<br />fff = function code (000-NOP, 001-ADD, 010-INC, 011-AND, 100-OR, 101-XOR, 110-NOT, 111-SHL)</code></pre>
    </div> 
</article>

<article class="box">
    <div class="content">
        <h4>8-Bit Move</h4>
        <div class="field is-grouped is-grouped-multiline is-family-monospace">
            <div class="control">
                <div class="tags has-addons are-medium">
                    <span class="tag is-primary">MOV8</span>
                    <span class="tag is-success">8</span>
                </div>
            </div>              
            <div class="control">
                <div class="tags has-addons are-medium" style="margin-bottom: 0;">
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">0</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">s</span>
                    <span class="tag is-info">s</span>
                    <span class="tag is-info">s</span>
                </div>
                
            </div>        
        </div>
        <pre class="is-size-7"><code>ddd = destination register (000-A, 001-B, 010-C, 011-D, 100-M1, 101-M2, 110-X, 111-Y)<br />sss = source register      (000-A, 001-B, 010-C, 011-D, 100-M1, 101-M2, 110-X, 111-Y)</code></pre>
    </div> 
</article>

<article class="box">
    <div class="content">
        <h4>Load Immediate</h4>
        <div class="field is-grouped is-grouped-multiline is-family-monospace">
            <div class="control">
                <div class="tags has-addons are-medium">
                    <span class="tag is-primary">SETAB</span>
                    <span class="tag is-success">8</span>
                </div>
            </div>              
            <div class="control">
                <div class="tags has-addons are-medium" style="margin-bottom: 0;">
                    <span class="tag is-link">0</span>
                    <span class="tag is-link">1</span>
                    <span class="tag is-info">r</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                    <span class="tag is-info">d</span>
                </div>
                
            </div>        
        </div>
        <pre class="is-size-7"><code>    r = destination register (0-A, 1-B)<br />ddddd = value (-16..15)</code></pre>
    </div> 
</article>

<p>Mapping this out as a binary tree using the highest 4 bits 
of the opcode we get the following:</p>

<figure><img src="/assets/img/posts/2015/2015-01-04-0000.png" alt="Opcode binary tree for MOV-8, ALU and SETAB" />
  
</figure>

<p>There will be further branches to this tree in the future as more 
instruction classes are added to the computer but for now I’m keeping to the 
three above as that will be enough to perform some simple programs. The tree 
above can now be easily mapped to the relays used by this computer:</p>

<figure><img src="/assets/img/posts/2015/2015-01-04-0001.png" alt="Decoder Relay Tree" />
  
</figure>

<p>With the basic relay 
connections designed it’s time to transfer this over to a 55 x 40 hole pad 
board as used on all the computer cards so far.</p>

<figure><img src="/assets/img/posts/2015/2015-01-04-0002.png" alt="Decoder Relays &amp; Internal Links" />
  
  <figcaption>Decoder Relays &amp; Internal Links (<a href="/assets/img/posts/2015/2015-01-04-1000.png">larger</a>)</figcaption>
</figure>

<p>As 
usual I’ll want the card to display the current instruction class being 
decoded so I can confirm correct operation and test/debug the card 
independantly. 3 LEDs will be needed for this to handle the three classes 
currently decodable and as always these are the 12V LEDs with internal 
resistor. Diagram wise it looks like this:</p>

<figure><img src="/assets/img/posts/2015/2015-01-04-0003.png" alt="Decoder LEDs" />
  
</figure>

<p>The mysterious gap between 
the MOV8 and ALU LEDs above is where a later instruction class LED will go 
(and there’ll be more LEDs added to the right as the card gets more classes 
added).</p>

<p>Next up is the connections to other parts of the computer 
and there’s yet another new connection type to introduce again … and this 
one is a little odd. So far I’ve introduced the ‘type Z’ connections (used on 
the three ALU cards and the AD and BC register cards) and the ‘type X’ 
connections (used by the instruction register covered in my last post). The 
enclosure which holds the cards has five type Z slots and five type X slots. 
There will be ‘type Y’ connectors which will be used by upcoming cards but 
these are again pretty similar to the type X and Z cards and the enclosure can 
hold five Y cards too. This card however is a ‘type W1’ and the enclosure can 
hold three ‘type W1’ cards and two ‘type W2’ cards. The reason for this oddity 
is because some of the W cards will be double height to use both W1 and W2 
connectors but for now we can think of W1 cards just like any other X, Y or Z 
cards. As you might expect any W1 card can talk to any other W1 card on all 
the available connection lines.</p>

<p>The ‘W1’ connections consist of the 
pulse timing signals (which will be produced by the upcoming sequencer card), 
8-bit control &amp; instruction bus, 8-bit operation bus and finally power 
connections. The diagram of the connectors look like this:</p>

<figure><img src="/assets/img/posts/2015/2015-01-04-0004.png" alt="Decoder W1 Connectors" />
  
  <figcaption>Decoder W1 Connectors (<a href="/assets/img/posts/2015/2015-01-04-1001.png">larger</a>)</figcaption>
</figure>

<p>This shows the 
four right angled boxed headers — from left to right these are: 5+5 power 
lines, 8+8 control/instruction bus, 8+8 operation bus and finally 10+10 pulse 
lines. On the operation bus the lines marked ‘***’ are lines that will be used 
by future ‘W1 type’ cards and the lines marked ‘—’ are unused/spare. The 
pulse lines are not labelled at the moment but that will all be changed when I 
design the upcoming sequencer card. The lines on each connector are as 
follows:</p>

<ul>
  <li>C/I-Bus (Control Bus + Instruction Bus)
    <ul>
      <li>I0-I7 … 8-bit Instruction Bus</li>
      <li>SN … ALU Sign Condition Bit Register</li>
      <li>CY … ALU Carry Condition Bit Register</li>
      <li>EZ … ALU Zero Condition Bit Register</li>
      <li>NZ … ALU Non-Zero Condition Bit Register</li>
      <li>CL … ALU Condition Register Load</li>
      <li>F2-F0 … ALU Function Code</li>
    </ul>
  </li>
  <li>OP-Bus (Operation Bus)
    <ul>
      <li>ISET … SETAB Instruction Class</li>
      <li>IMV8 … MOV-8 Instruction Class</li>
      <li>IALU … ALU Instruction Class</li>
    </ul>
  </li>
  <li>Pulse (Sequencing Lines)</li>
</ul>

<p>So, finally, wiring everything together we get the 
following:</p>

<figure><img src="/assets/img/posts/2015/2015-01-04-0005.png" alt="Completed Decoder Card (for SETAB, MOV-8 and ALU classes)" />
  
  <figcaption>Completed Decoder Card (for SETAB, MOV-8 and ALU classes) (<a href="/assets/img/posts/2015/2015-01-04-1002.png">larger</a>)</figcaption>
</figure>

<p>This diagram includes everything mentioned so far along 
with the power supply and ground lines and all other internal wiring. As with 
previous cards, the completed decoder design can be found <a href="/assets/pdf/decoder-1.pdf">here in PDF format</a>.</p>

<p>So, that’s the decoder 
all designed and ready for the first three instruction classes. The next card 
to design is the sequencer which will produce the timing pulses that the 
control card (which I’ll design after the sequencer) will use along with the 
instruction class produced by this card to fire the control lines in the 
required order. When all of that is done it’ll finally be time to get 
constructing and put together these four cards (instruction register, decoder, 
sequencer and control) which will get the computer to the stage where a single 
instruction can be performed fully by manually pulsing the clock line.</p>


    </div>

    <div class="field is-grouped is-grouped-multiline">
      <div class="control">
        <a href="/archive#2015" class="tags has-addons">
          <span class="tag is-link">Published</span>
          <span class="tag is-info">Jan 4, 2015</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#design" class="tags">
          <span class="tag is-primary">design</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#decoder" class="tags">
          <span class="tag is-primary">decoder</span>
        </a>
      </div>
      
    </div>

    <div class="columns">
      <div class="column">
        
          <span class="has-text-weight-semibold">Previous Post</span><br />
          <a href="/2014/12/register-design-instruction-register">Register Design: Instruction Register</a>
                
      </div>
      <div class="column has-text-right">
        
          <span class="has-text-weight-semibold">Next Post</span><br />
          <a href="/2015/01/sequencer-design-8-cycle-fsm">Sequencer Design: 8-cycle FSM</a>
                
      </div>
    </div>

  </div>
</div>
        </div>
      </section>
          
      <footer class="footer">
    <div class="container">
        <div class="columns">
            <div class="column">   
                <h3>On this blog</h3>  
                <p><a href="/index.html">Home</a></p>
                <p><a href="/archive">Archive</a></p>
                <p><a href="/tags">Tags</a></p>
                <p><a href="/pages/progress">Progress</a></p>
            </div>        
            <div class="column">
                <h3>Related sites</h3>
                <p><a href="https://www.youtube.com/channel/UCDn07eKw2HDPIgSAGQgliAA"><span class="fab fa-youtube fa-lg fa-fw"></span> YouTube Channel</a></p>
                <p><a href="https://github.com/paul80nd"><span class="fab fa-github fa-lg fa-fw"></span> GitHub Repos</a></p>
                <p><a href="http://simulator.relaycomputer.co.uk"><span class="fas fa-flask fa-lg fa-fw"></span> Relay Simulator</a></p>
            </div>
            <div class="column">
                <h3>Share on social media</h3>
                <p><a href="https://www.facebook.com/sharer/sharer.php?u=&amp;quote=" target="_blank"><span class="fab fa-facebook fa-lg fa-fw"></span> Share on Facebook</a></p>
                <p><a href="https://twitter.com/intent/tweet?source=&amp;text=" target="_blank"><span class="fab fa-twitter fa-lg fa-fw"></span> Tweet</a></p>
                <p><a href="http://www.tumblr.com/share?v=3&amp;u=&amp;quote=&amp;s=" target="_blank"><span class="fab fa-tumblr fa-lg fa-fw"></span> Post to Tumblr</a></p> 
                <p><a href="http://pinterest.com/pin/create/button/?url=&amp;description=" target="_blank"><span class="fab fa-pinterest fa-lg fa-fw"></span> Pin it</a></p> 
                <p><a href="http://www.reddit.com/submit?url=&amp;title=" target="_blank"><span class="fab fa-reddit fa-lg fa-fw"></span> Submit to Reddit</a></p>   
                <p><a href="mailto:?subject=&amp;body=" target="_blank"><span class="fas fa-envelope fa-lg fa-fw"></span> Send email</a></p> 
            </div>
        </div>                    
    </div>
</footer>

      <script src="/assets/js/app.js" type="text/javascript"></script>
  </body>

</html>