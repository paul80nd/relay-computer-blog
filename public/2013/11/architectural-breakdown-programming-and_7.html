<!DOCTYPE html>
<html lang="en">

  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Architectural breakdown: Programming and Control 2 | Relay Computer</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Architectural breakdown: Programming and Control 2" />
<meta name="author" content="Paul Law" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="So, the last post didn’t quite wrap up this ‘mini-series’ but hopefully this one will. Continuing on with how the Programming and Control of the computer happens here again, for the last time (really last time), is the architecture I’ll be building against (from the Harry Porter Relay Computer)" />
<meta property="og:description" content="So, the last post didn’t quite wrap up this ‘mini-series’ but hopefully this one will. Continuing on with how the Programming and Control of the computer happens here again, for the last time (really last time), is the architecture I’ll be building against (from the Harry Porter Relay Computer)" />
<link rel="canonical" href="https://relaycomputer.co.uk/2013/11/architectural-breakdown-programming-and_7" />
<meta property="og:url" content="https://relaycomputer.co.uk/2013/11/architectural-breakdown-programming-and_7" />
<meta property="og:site_name" content="Relay Computer" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-11-07T23:22:00+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Paul Law"},"url":"https://relaycomputer.co.uk/2013/11/architectural-breakdown-programming-and_7","description":"So, the last post didn’t quite wrap up this ‘mini-series’ but hopefully this one will. Continuing on with how the Programming and Control of the computer happens here again, for the last time (really last time), is the architecture I’ll be building against (from the Harry Porter Relay Computer)","headline":"Architectural breakdown: Programming and Control 2","@type":"BlogPosting","datePublished":"2013-11-07T23:22:00+00:00","dateModified":"2013-11-07T23:22:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://relaycomputer.co.uk/2013/11/architectural-breakdown-programming-and_7"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<!-- Begin CSS Styles -->
<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,500,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,500,700" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/app.css">
<!-- End CSS Styles -->



<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link type="application/atom+xml" rel="alternate" href="https://relaycomputer.co.uk/feed.xml" title="Relay Computer" />

<!-- Begin EU Cookie Consent -->
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "#f1d600"
    }
  }
})});
</script>
<!-- End EU Cookie Consent -->


    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47484999-2', 'auto');
	ga('send', 'pageview', { 'page': location.pathname + location.search + location.hash});
	ga('set', 'anonymizeIp', false);
    </script>
    <!-- End Google Analytics -->
    </head>


  <body>
      <nav class="navbar is-primary" >
        <div class="container">
            <div class="navbar-brand">
                <a href="/" class="navbar-item">
                    Relay Computer
                </a>
                <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>
            <div class="navbar-menu" id="navMenu">
                <div class="navbar-start">
                    <a href="/" class="navbar-item ">Home</a>
                    
                    
                        
                        <a href="/pages/overview.html" class="navbar-item ">Overview</a>
                        
                    
                        
                        <div class="navbar-item has-dropdown is-hoverable">
                            <a href="/#" class="navbar-link ">Summaries</a>
                            <div class="navbar-dropdown">
                                
                                <a href="/pages/progress.html" class="navbar-item ">Progress</a>
                                
                                <a href="/pages/instructions.html" class="navbar-item ">Instructions</a>
                                
                                <a href="/pages/alu.html" class="navbar-item ">ALU</a>
                                
                                <a href="/pages/control.html" class="navbar-item ">Control</a>
                                
                                <a href="/pages/enclosure.html" class="navbar-item ">Enclosure</a>
                                
                                <a href="/pages/registers.html" class="navbar-item ">Registers</a>
                                
                                <a href="/pages/ui.html" class="navbar-item ">UI</a>
                                
                            </div>
                        </div>
                        
                    
                        
                        <a href="/archive.html" class="navbar-item ">Archive</a>
                        
                    
                        
                        <a href="/tags.html" class="navbar-item ">Tags</a>
                        
                    
                    
                </div>
            </div>
        </div>
    </nav>

      
        <section class="hero is-bold is-primary" >
    <div class="hero-body">
        <div class="container">                
            <h1 class="title ">Architectural breakdown: Programming and Control 2</h1>
            <h2 class="subtitle"></h2>
        </div>
    </div>
</section>
      

      <section class="section">
        <div class="container">
              <div class="columns">
  <div class="column is-three-quarters-widescreen">
    <div class="content">

      <p>So, the last post didn’t quite wrap up this ‘mini-series’ but hopefully this 
one will. Continuing on with how the Programming and Control of the computer 
happens here again, for the last time (really last time), is the architecture 
I’ll be building against (from the 
<a rel="nofollow" href="http://web.cecs.pdx.edu/~harry/Relay/index.html">Harry Porter Relay Computer</a>)</p>

<figure>
  <img src="/assets/img/posts/2013/2013-11-07-0000.png" alt="System Architecture for a Relay Computer" />
  
  <figcaption>System Architecture for a Relay Computer<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></figcaption>
</figure>

<p>In the last post I covered an example of the 
steps required to subtract 6 from 10 (with 6 placed in register B and 10 in 
register C beforehand) and also that each step is represented by an opcode 
which is placed in the Instruction register so the computer can work out the 
sequence of actions to take to perform the step. The collection of program 
steps are stored in the memory along with any data required and so a full 
program to subtract 6 from 10 would look as follows in memory:</p>

<pre><code>0001  11000000    Set M-Register to 0x0016
0002  00000000
0003  00010110  
0004  10010010    Load Register C from Memory (Address in M)
0005  11000000    Set M-Register to 0x0017
0006  00000000
0007  00010111  
0008  10010001    Load Register B from Memory (Address in M)
0009  10000110    ALU Not to A
000A  00000001    Move A to B
000B  10000010    ALU Increment to A
000C  00000001    Move A to B
000D  10000001    ALU Add to A
000E  11000000    Set M-Register to 0x0018
000F  00000000
0010  00011000
0011  10011000    Store Register A into Memory (Address in M)
0012  10101110    HALT
0013  00000000
0014  00000000
0015  00000000    Data Starts Below
0016  00001010    10
0017  00000110    6
0018  00000000    0 (Result will be stored here)
</code></pre>

<p>First thing to 
note is the values in the left column are the memory addresses (shown in 
hexadecimal) — you can see that this increases by one for each sequential byte 
in the program. The second column is the opcode itself and there’s a couple of 
new opcodes thrown in here. Firstly the ‘Load 16-bit immediate’ which places a 
16-bit value into the M register by loading the first byte that follows the 
opcode into M2 then the next byte into M1. There is also the Load and Store 
opcodes which using the address stored in the M register either store a value 
from a given register to memory or load a register with a value in memory. 
Finally there is the Halt opcode which stops the computer from executing the 
program. Notice again that the data and program both sit in memory and the 
values 10 and 6 are stored following the program.</p>

<p>So, how does the 
program get in memory in the first place? Effectively you would set the target 
address for the first line of the program on the address bus, enter the opcode 
on the data bus then load the value into memory (all by using toggle 
switches). Next you set the target address one slot higher, set the next 
opcode and load the value into memory. This sequence is repeated until the 
program is all loaded in. Needless to say if you get a power cut then you’ll 
have to start again from scratch. Incidentally the 
<a rel="nofollow" href="http://www.computerculture.org/projects/rc3/">Phil Ryals RC-3 Relay Computer</a> 
makes this all a little bit easier by letting the user 
set the opcode and then flick a single switch which stores the value in memory 
and increments the address by one.</p>

<p>With the program in memory we’re 
all set to let the computer start executing it. We just need to ensure the 
Program Counter register is pointing at the first line of the program 
(typically at address 0) and we’re good to go. Starting the computer up it 
will now perform the following steps:</p>

<ol>
  <li>Read the value in Memory (at the address pointed to by the Program Counter) 
into the Instruction Register.</li>
  <li>Increment the Program Counter by 1 (using the 16-bit incrementer)</li>
  <li>Decode the Instruction Register and perform the operation</li>
  <li>Repeat</li>
</ol>

<p>This allows a sequential program (like the 
subtract one above) to run through to the end as intended. If we want to do 
something a little more complex that’s where jumps come in so that depending 
on the result of the ALU condition registers we can jump to a different line 
of the program by setting the Program Counter to an address pre-loaded into 
the J register. That’s basically it … in the next post I’ll reveal the full 
list of opcodes this computer will implement along with the assembly mnemonics 
for each although I won’t go into too much detail on it for now as it’ll be 
quite a while before the computer is at the stage where its ready to be 
programmed.</p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p><a rel="nofollow" href="http://web.cecs.pdx.edu/~harry/Relay/RelayPaper.htm#Overall%20System%20Architecture">Image</a> reproduced here with the kind permission of Dr Harry Porter <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>


    </div>

    <div class="field is-grouped is-grouped-multiline">
      <div class="control">
        <a href="/archive#2013" class="tags has-addons">
          <span class="tag is-link">Published</span>
          <span class="tag is-info">Nov 7, 2013</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#theory" class="tags">
          <span class="tag is-primary">theory</span>
        </a>
      </div>
      
      <div class="control">
        <a href="/tags#Architecture" class="tags">
          <span class="tag is-primary">Architecture</span>
        </a>
      </div>
      
    </div>

    <div class="columns">
      <div class="column">
        
          <span class="has-text-weight-semibold">Previous Post</span><br />
          <a href="/2013/11/architectural-breakdown-programming-and">Architectural breakdown: Programming and Control</a>
                
      </div>
      <div class="column has-text-right">
        
          <span class="has-text-weight-semibold">Next Post</span><br />
          <a href="/2013/11/instruction-set">Instruction Set</a>
                
      </div>
    </div>

  </div>
</div>
        </div>
      </section>
          
      <footer class="footer">
    <div class="container">
        <div class="columns">
            <div class="column">   
                <h3>On this blog</h3>  
                <p><a href="/index.html">Home</a></p>
                <p><a href="/archive">Archive</a></p>
                <p><a href="/tags">Tags</a></p>
                <p><a href="/pages/progress">Progress</a></p>
            </div>        
            <div class="column">
                <h3>Related sites</h3>
                <p><a href="https://www.youtube.com/channel/UCDn07eKw2HDPIgSAGQgliAA"><span class="fab fa-youtube fa-lg fa-fw"></span> YouTube Channel</a></p>
                <p><a href="https://github.com/paul80nd"><span class="fab fa-github fa-lg fa-fw"></span> GitHub Repos</a></p>
                <p><a href="http://simulator.relaycomputer.co.uk"><span class="fas fa-flask fa-lg fa-fw"></span> Relay Simulator</a></p>
            </div>
            <div class="column">
                <h3>Share on social media</h3>
                <p><a href="https://www.facebook.com/sharer/sharer.php?u=&amp;quote=" target="_blank"><span class="fab fa-facebook fa-lg fa-fw"></span> Share on Facebook</a></p>
                <p><a href="https://twitter.com/intent/tweet?source=&amp;text=" target="_blank"><span class="fab fa-twitter fa-lg fa-fw"></span> Tweet</a></p>
                <p><a href="http://www.tumblr.com/share?v=3&amp;u=&amp;quote=&amp;s=" target="_blank"><span class="fab fa-tumblr fa-lg fa-fw"></span> Post to Tumblr</a></p> 
                <p><a href="http://pinterest.com/pin/create/button/?url=&amp;description=" target="_blank"><span class="fab fa-pinterest fa-lg fa-fw"></span> Pin it</a></p> 
                <p><a href="http://www.reddit.com/submit?url=&amp;title=" target="_blank"><span class="fab fa-reddit fa-lg fa-fw"></span> Submit to Reddit</a></p>   
                <p><a href="mailto:?subject=&amp;body=" target="_blank"><span class="fas fa-envelope fa-lg fa-fw"></span> Send email</a></p> 
            </div>
        </div>                    
    </div>
</footer>

      <script src="/assets/js/app.js" type="text/javascript"></script>
  </body>

</html>